# Default values for nullify-k8s-collector
# This is a YAML-formatted file.
#
# REQUIRED VALUES (must be configured before deployment):
#   - collector.clusterName: Your exact EKS cluster name
#   - collector.s3.bucket: S3 bucket from Nullify configure page
#   - collector.kms.keyArn: KMS key ARN from Nullify configure page
#   - serviceAccount.annotations.eks.amazonaws.com/role-arn: IAM role ARN from Nullify configure page

# Cluster-level permissions
clusterRole:
    create: true
    name: nullify-k8s-collector-role
clusterRoleBinding:
    create: true
    name: nullify-k8s-collector-binding

# Main collector configuration
collector:
    enabled: true
    
    # AWS region (extract from your KMS key ARN)
    aws:
        region: us-east-1
    
    # Must match your actual EKS cluster name exactly
    clusterName: "YOUR-CLUSTER-NAME"
    
    # Container image
    image:
        repository: public.ecr.aws/w4o2j2x4/integrations
        tag: k8s-collector-latest
        pullPolicy: Always
    
    # Resource limits
    resources:
        limits:
            cpu: 200m
            memory: 256Mi
        requests:
            cpu: 100m
            memory: 128Mi
    
    # S3 configuration (from Nullify configure page)
    s3:
        bucket: "YOUR-NULLIFY-S3-BUCKET"
        keyPrefix: k8s-collector
    
    # KMS configuration (from Nullify configure page)
    kms:
        keyArn: "arn:aws:kms:REGION:ACCOUNT:key/KEY-ID"
    
    # Debug logging
    debug:
        enabled: false
    
    # CronJob schedule (daily at midnight UTC)
    schedule: "0 0 * * *"
    
    # Security context
    securityContext:
        allowPrivilegeEscalation: false
        capabilities:
            drop:
                - ALL
        readOnlyRootFilesystem: true
        runAsNonRoot: true
    
    # Data collection filters (optional)
    dataCollection:
        # excludeNamespaces: "kube-system,kube-public"
        # includeResources: "pods,services,deployments"
        # metadataOnly: true

# Helm chart naming
fullnameOverride: ""
nameOverride: ""

# Labels for all resources
labels: {}

# Namespace configuration
namespace:
    annotations: {}
    create: true
    requireNamespace: false

# Node selector
nodeSelector: {}

# Service account for IRSA (from Nullify configure page)
serviceAccount:
    annotations:
        eks.amazonaws.com/role-arn: "arn:aws:iam::ACCOUNT:role/ROLE-NAME"
    create: true
    name: nullify-k8s-collector-sa
    namespace: nullify

# Pod tolerations
tolerations: []
